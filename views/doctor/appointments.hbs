<section class="dr-page appmnt ml-250">
  <div class="tab">
    <button class="tb active" data-id="today" onclick="tabview(event)">
      <i class="fas fa-calendar-day"></i>
      Hôm nay
    </button>
    <button class="tb" data-id="upcoming" onclick="tabview(event)">
      <i class="fas fa-calendar-week"></i>
      Sắp tới
    </button>
    <button class="tb" data-id="consulted" onclick="tabview(event)">
      <i class="fas fa-clipboard-check"></i>
      Hoàn thành
    </button>
    <button class="tb" data-id="cancelled" onclick="tabview(event)">
      <i class="fas fa-calendar-times"></i>
      Bị hủy
    </button>
    <button class="tb" data-id="expired" onclick="tabview(event)">
      <i class="fas fa-history"></i>
      Hết hạn
    </button>
    <hr />
  </div>
  <div style="text-align: right" id="date-c">
    <input type="date" id="date" value="{{date}}" style="visibility: hidden;">
  </div>
  <!-- today -->
  <div class="card-sec active" id="today">
    {{#if todays}}
    {{#each todays}}
    <div class="card" id="{{this._id}}">
      <div class="c-head">
        <p>{{this.user.name}}</p>
        {{#if this.user.email}}
        <p>{{this.user.email}}</p>
        {{else}}
        <p>{{this.user.contactno}}</p>
        {{/if}}
      </div>
      <div class="c-content">
        <p>{{this.date}}</p>
        <p>{{this.timeslot}}</p>
        <div class="btn-grp" style="margin-left: 0;">
          <a href="/consult/{{this._id}}"><button class="crop">Tư vấn</button></a>
          <button class="crop" style="margin-left: 10px;"
            onclick="modalup('delete-modal','{{this._id}}')">Hủy</button>
        </div>
      </div>
    </div>
    {{/each}}
    {{else}}
    <div class="card" style="display: flex; justify-content: center; align-items: center">
      <h1>Không có lịch hẹn</h1>
    </div>
    {{/if}}
  </div>
  <!-- upcoming -->
  <div class="card-sec" id="upcoming">
    {{#if upcoming}}
    {{#each upcoming}}
    <div class="card" id="{{this._id}}">
      <div class="c-head">
        <p>{{this.user.name}}</p>
        {{#if this.user.email}}
        <p>{{this.user.email}}</p>
        {{else}}
        <p>{{this.user.contactno}}</p>
        {{/if}}
      </div>
      <div class="c-content">
        <p>{{this.date}}</p>
        <p>{{this.timeslot}}</p>
        <div class="btn-grp" style="margin-left: 0;">
          <button class="crop" onclick="modalup('delete-modal','{{this._id}}')">Hủy</button>
        </div>
      </div>
    </div>
    {{/each}}
    {{else}}
    <div class="card" style="display: flex; justify-content: center; align-items: center">
      <h1>Không có lịch hẹn</h1>
    </div>
    {{/if}}
  </div>
  <!-- consulted -->
  <div class="card-sec" id="consulted">
    {{#if consulted}}
    {{#each consulted}}
    <div class="card" id="{{this._id}}">
      <div class="c-head">
        <p>{{this.user.name}}</p>
        {{#if this.user.email}}
        <p>{{this.user.email}}</p>
        {{else}}
        <p>{{this.user.contactno}}</p>
        {{/if}}
      </div>
      <div class="c-content">
        <p>{{this.date}}</p>
        <p>{{this.timeslot}}</p>
        <h4>Medicines</h4>
        {{#if this.medicines}}
        {{#each this.medicines}}
        <p>{{this}}</p>
        {{/each}}
        {{else}}
        <p>No Medicines Provided</p>
        {{/if}}
        {{#if this.notes}}
        <h4>Notes</h4>
        <p>{{this.notes}}
        </p>
        {{/if}}
      </div>
    </div>
    {{/each}}
    {{else}}
    <div class="card" style="display: flex; justify-content: center; align-items: center">
      <h1>Không có lịch hẹn</h1>
    </div>
    {{/if}}
  </div>
  <!-- cancelled -->
  <div class="card-sec" id="cancelled">
    {{#if cancelled}}
    {{#each cancelled}}
    <div class="card">
      <div class="c-head">
        <p>{{this.user.name}}</p>
        {{#if this.user.email}}
        <p>{{this.user.email}}</p>
        {{else}}
        <p>{{this.email.contactno}}</p>
        {{/if}}
      </div>
      <div class="c-content">
        <p>{{this.date}}</p>
        <p>{{this.timeslot}}</p>
      </div>
    </div>
    {{/each}}
    {{else}}
    <div class="card" style="display: flex; justify-content: center; align-items: center">
      <h1>Không có lịch hẹn</h1>
    </div>
    {{/if}}
  </div>
  <!-- expired -->
  <div class="card-sec" id="expired">
    {{#if expired}}
    {{#each expired}}
    <div class="card">
      <div class="c-head">
        <p>{{this.user.name}}</p>
        {{#if this.user.email}}
        <p>{{this.user.email}}</p>
        {{else}}
        <p>{{this.user.contactno}}</p>
        {{/if}}
      </div>
      <div class="c-content">
        <p>{{this.date}}</p>
        <p>{{this.timeslot}}</p>
        <p>{{this.status}}</p>
      </div>
    </div>
    {{/each}}
    {{else}}
    <div class="card" style="display: flex; justify-content: center; align-items: center">
      <h1>Không có lịch hẹn</h1>
    </div>
    {{/if}}
  </div>
</section>
<div class="modal delete-modal">
  <h1>
    Bạn có muốn hủy ?
  </h1>
  <button class="yes" onclick="cancelBooking()">
    Có
  </button>
  <button class="no" onclick="document.querySelector('.delete-modal').classList.toggle('active')">
    Không
  </button>
</div>
<div class="modal delete-sucess-modal">
  <h1>
    Xóa thành công
  </h1>
  <button class="normal" onclick="document.querySelector('.delete-sucess-modal').classList.toggle('active')">
    Đóng
  </button>
</div>
<div class="modal delete-fail-modal">
  <h1>
    Có lỗi xảy ra
  </h1>
  <button class="normal" onclick="document.querySelector('.delete-fail-modal').classList.toggle('active')">
    Đóng
  </button>
</div>
<script src="/javascripts/appointment-doc.js"></script>